<%- include('../partials/header', { title: 'Kelola Domain' }) %>

<style>
    .grid-2 { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }
    .detail-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #eee; }
    .detail-item:last-child { border-bottom: none; }
</style>

<h1>Kelola Domain: <span style="color: var(--primary-accent);"><%= domain.name %></span></h1>

<div class="grid-2" style="margin-top: 2rem;">
    <div class="card">
        <h3><i class="fas fa-info-circle"></i> Detail Domain</h3>
        <div class="detail-item"><span>Status</span> <span><%= domain.status_desc %></span></div>
        <div class="detail-item"><span>Dibuat pada</span> <span><%= new Date(domain.created_at).toLocaleDateString('id-ID') %></span></div>
        <div class="detail-item"><span>Kedaluwarsa</span> <span><%= new Date(domain.expiry_date).toLocaleDateString('id-ID') %></span></div>
    </div>
    <div class="card">
        <h3><i class="fas fa-server"></i> Nameserver</h3>
        <% if (domain.nameservers && domain.nameservers.length > 0) { %>
            <% domain.nameservers.forEach(ns => { %>
                <div class="detail-item"><span><%= ns.host %></span></div>
            <% }) %>
        <% } else { %>
            <p>Nameserver belum diatur.</p>
        <% } %>
    </div>
    <div class="card">
        <h3><i class="fas fa-dns"></i> DNS Manager</h3>
        <p>Kelola record DNS untuk domain Anda.</p>
        <a href="/dashboard/domain/<%= domain.id %>/dns" class="btn btn-primary">Buka DNS Manager</a>
    </div>
    <div class="card">
        <h3><i class="fas fa-lock"></i> Registrar Lock</h3>
        <div class="detail-item">
            <span>Status Lock</span>
            <span><%= domain.is_locked ? 'AKTIF' : 'NONAKTIF' %></span>
        </div>
        <form action="/dashboard/domain/<%= domain.id %>/toggle-lock" method="POST" onsubmit="return confirm('Yakin ingin mengubah status lock?');">
            <% if (domain.is_locked) { %>
                <button type="submit" class="btn btn-danger">Buka Kunci (Unlock)</button>
            <% } else { %>
                <button type="submit" class="btn btn-primary">Kunci (Lock)</button>
            <% } %>
        </form>
    </div>
</div>

<%- include('../partials/footer') %>