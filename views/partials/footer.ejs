</main>
    <% if (user) { %>
    </div>
    <% } %>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebar-toggle');
            const sidebarClose = document.getElementById('sidebar-close');
            const notificationBell = document.getElementById('notification-bell');
            const notificationDropdown = document.getElementById('notification-dropdown');
            const userProfileToggle = document.getElementById('user-profile-toggle');
            const userDropdown = document.getElementById('user-dropdown');

            if (sidebarToggle) {
                sidebarToggle.addEventListener('click', () => {
                    sidebar.classList.add('open');
                    document.body.style.overflow = 'hidden';
                });
            }
            if (sidebarClose) {
                sidebarClose.addEventListener('click', () => {
                    sidebar.classList.remove('open');
                    document.body.style.overflow = '';
                });
            }

            if (notificationBell) {
                notificationBell.addEventListener('click', (event) => {
                    event.stopPropagation();
                    notificationDropdown.classList.toggle('show');
                    userDropdown.classList.remove('show');
                });
            }

            if (userProfileToggle) {
                userProfileToggle.addEventListener('click', (event) => {
                    event.stopPropagation();
                    userDropdown.classList.toggle('show');
                    notificationDropdown.classList.remove('show');
                });
            }

            document.addEventListener('click', (event) => {
                if (notificationDropdown && !notificationDropdown.contains(event.target) && !notificationBell.contains(event.target)) {
                    notificationDropdown.classList.remove('show');
                }
                if (userDropdown && !userDropdown.contains(event.target) && !userProfileToggle.contains(event.target)) {
                    userDropdown.classList.remove('show');
                }
                if (sidebar && !sidebar.contains(event.target) && !sidebarToggle.contains(event.target) && sidebar.classList.contains('open')) {
                    if (window.innerWidth < 992) {
                        sidebar.classList.remove('open');
                        document.body.style.overflow = '';
                    }
                }
            });
        });
    </script>
</body>
</html>