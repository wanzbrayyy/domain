<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= typeof title !== 'undefined' ? title : 'DigitalHostID' %></title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --sidebar-bg: #1f1d2b; --main-bg: #f4f7f9; --primary-accent: #82aaff; --text-light: #f9fafb; --text-dark: #1f2937; --border-color: #3e3c4a; --notif-red: #ef4444; } *, *::before, *::after { box-sizing: border-box; } body { font-family: 'Poppins', sans-serif; margin: 0; background-color: var(--main-bg); color: var(--text-dark); } .sidebar { height: 100%; width: 260px; position: fixed; z-index: 1001; top: 0; left: 0; background-color: var(--sidebar-bg); padding-top: 20px; transform: translateX(-100%); transition: transform 0.3s ease; box-shadow: 5px 0 15px rgba(0,0,0,0.2); } .sidebar.open { transform: translateX(0); } #sidebar-close { position: absolute; top: 15px; right: 20px; font-size: 1.5rem; color: var(--text-light); cursor: pointer; } .sidebar-header { padding: 0 25px 20px 25px; text-align: center; border-bottom: 1px solid var(--border-color); } .sidebar-header a { color: var(--text-light); text-decoration: none; font-size: 1.5rem; font-weight: 700; } .sidebar-nav { list-style: none; padding: 20px 0; margin: 0; } .sidebar-nav li a { display: flex; align-items: center; padding: 15px 25px; color: var(--text-light); text-decoration: none; transition: all 0.2s; font-size: 1.05rem; } .sidebar-nav li a:hover { background-color: var(--primary-accent); color: var(--sidebar-bg); } .sidebar-nav li a i { width: 30px; margin-right: 15px; font-size: 1.2rem; text-align: center; } .top-bar { display: flex; justify-content: space-between; align-items: center; background: #fff; padding: 15px 25px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 500; } #sidebar-toggle { font-size: 1.5rem; cursor: pointer; color: var(--text-dark); } .top-bar-right { position: relative; } .notification-bell { font-size: 1.5rem; cursor: pointer; color: var(--text-dark); } .notification-dot { position: absolute; top: -5px; right: -5px; width: 10px; height: 10px; background-color: var(--notif-red); border-radius: 50%; border: 2px solid white; } .notification-dropdown { display: none; position: absolute; top: 100%; right: 0; width: 320px; background: white; border-radius: 8px; box-shadow: 0 5px 20px rgba(0,0,0,0.15); z-index: 1002; margin-top: 10px; } .notification-dropdown.show { display: block; } .notif-header { font-weight: 600; padding: 12px 15px; border-bottom: 1px solid #eee; } .notif-item { padding: 12px 15px; border-bottom: 1px solid #eee; } .notif-item:last-child { border-bottom: none; } .notif-item h4 { margin: 0 0 5px 0; font-size: 0.9rem; } .notif-item p { margin: 0; font-size: 0.85rem; color: #666; } .main-content { padding: 2rem; } .card { background-color: #ffffff; border-radius: 8px; padding: 1.5rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05); margin-bottom: 1.5rem; }
    </style>
</head>
<body>
    <aside class="sidebar" id="sidebar">
        <i class="fas fa-times" id="sidebar-close"></i>
        <div class="sidebar-header"><a href="/">DigitalHostID</a></div>
        <ul class="sidebar-nav">
            <% if (user) { %>
                <li><a href="/dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="/dashboard/buy-domain"><i class="fas fa-plus-circle"></i> Beli Domain</a></li>
                <li><a href="/dashboard/settings"><i class="fas fa-user-cog"></i> Pengaturan</a></li>
                <% if (user.role === 'admin') { %>
                    <li><a href="/admin"><i class="fas fa-shield-alt"></i> Panel Admin</a></li>
                <% } %>
                <li style="border-top: 1px solid var(--border-color); margin-top: 10px; padding-top: 10px;"><a href="/logout"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            <% } %>
        </ul>
    </aside>

    <div class="content-wrapper">
        <header class="top-bar">
            <i class="fas fa-bars" id="sidebar-toggle"></i>
            <div class="top-bar-right">
                <div class="notification-bell" id="notification-bell">
                    <i class="fas fa-bell"></i>
                    <% if (notifications && notifications.length > 0) { %><div class="notification-dot"></div><% } %>
                </div>
                <div class="notification-dropdown" id="notification-dropdown">
                    <div class="notif-header">Notifikasi</div>
                    <% if (notifications && notifications.length > 0) { %>
                        <% notifications.forEach(notif => { %>
                        <a href="<%= notif.link %>" style="text-decoration: none; color: inherit;">
                            <div class="notif-item">
                                <h4><%= notif.title %></h4>
                                <p><%= notif.message %></p>
                            </div>
                        </a>
                        <% }) %>
                    <% } else { %>
                        <div class="notif-item"><p>Tidak ada notifikasi baru.</p></div>
                    <% } %>
                </div>
            </div>
        </header>
        
        <div style="padding: 0 2rem;">
            <% if (success_msg && success_msg.length > 0) { %><div class="card" style="background-color: #d4edda; color: #155724; border-color: #c3e6cb; margin-top: 1rem;"><%= success_msg[0] %></div><% } %>
            <% if (error_msg && error_msg.length > 0) { %><div class="card" style="background-color: #f8d7da; color: #721c24; border-color: #f5c6cb; margin-top: 1rem;"><%= error_msg[0] %></div><% } %>
        </div>

        <main class="main-content">